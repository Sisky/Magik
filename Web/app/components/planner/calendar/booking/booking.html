<!--Modal Trigger-->
<div class="col m11" (click)="changeLog(); myModal.open();" >
    <div class="card white">
        <div class="card-content grey-text">
            <span class="booking-title">Operating Room {{room}}</span><br><br>
            <p>
                <b class="booking-time">AM Session</b><br>
                Department: {{deptAM}}<br>
                Surgeon: {{surgAM}}<br><br>
                <b class="booking-time">PM Session</b><br>
                Department: {{deptPM}}<br>
                Surgeon: {{surgPM}}
            </p>
        </div>
    </div>
</div>
<!--Modal Structure-->
<div>
    <modal #myModal [closeOnEscape]="false" [closeOnOutsideClick]="false">
    <modal-header>
        <h1 class="modal-title">{{date | date:'EEEE dd MMM'}}<br> Operating Room {{room}} Level {{level}}</h1>
    </modal-header>
    <modal-content>

        <form [formGroup]="formModel" (ngSubmit)="save()" novalidate>
            <div class="col m12">
                <label style="font-weight: 400; font-size: 125%">Morning Session</label><br>
            </div>
            <div class="row no-pad-bot">
                <div class="col m6">
                    <div class="form-group">
                        <label for="f_surgAM">Surgeon</label>
                        <input id="f_surgAM" value="{{surgAM}}" type="text" formControlName="f_surgAM">
                    </div>
                </div>
                <div class="col m6">
                    <div class="form-group">
                        <label for="f_deptAM">Department</label>
                        <input id="f_deptAM" value="{{deptAM}}" type="text" formControlName="f_deptAM">
                    </div>
                </div>

            <div class="col m12 no-pad-top">
                <label style="font-weight: 400; font-size: 125%">Afternoon Session</label><br>
            </div>

                <div class="col m6">
                    <div class="form-group">
                        <label for="f_surgPM">Surgeon</label>
                        <input id="f_surgPM" value="{{surgPM}}" type="text" formControlName="f_surgPM">
                    </div>
                </div>
                <div class="col m6">
                    <div class="form-group">
                        <label for="f_deptPM">Department</label>
                        <input id="f_deptPM" value="{{deptPM}}" type="text" formControlName="f_deptPM">
                    </div>
                </div>
            </div>
            <div class="col m6"></div>
            <div class="col m6">
                <button type="submit" class="waves-effect waves-light btn left ">Save</button>
                <button class="waves-effect waves-light btn right ">Close</button>
            </div>

        </form>
    <modal-footer>
        <label style="font-weight: 400; font-size: 125%">Change Log</label>
        <hr>
        <div *ngFor="let c of changedBookings">
            <div class="row">
                <div class="row">
                    <label>Changed on {{c.created | date:'dd MMM hh:mm'}}</label>
                </div>
                <div class="col m6">
                    <label>Morning</label><br>
                    Surgeon: {{c.am_surg}}<br>
                    Department: {{c.am_dept}}
                </div>
                <div class="col m6">
                    <label>Afternoon</label><br>
                    Surgeon: {{c.pm_surg}}<br>
                    Department: {{c.pm_dept}}
                </div>
            </div>
            <hr>
        </div>
    </modal-footer>
    </modal-content>

</modal>
</div>



